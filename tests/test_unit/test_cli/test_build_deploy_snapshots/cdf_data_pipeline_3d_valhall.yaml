DataSet:
- description: 3D data for oid uploaded from file share (OID data, Valhall 3D model)
  externalId: ds_3d_oid
  metadata:
    consoleSource: '{"names": ["fileshare"]}'
    rawTables: '[{"databaseName": "3d_oid_fileshare", "tableName": "contextualization_good"},
      {"databaseName": "3d_oid_fileshare", "tableName": "contextualization_bad"},
      {"databaseName": "3d_oid_fileshare", "tableName": "contextualization_manual_input"}]'
  name: 3d:oid
  writeProtected: false
ExtractionPipeline:
- createdBy: unknown
  dataSetId: 42
  description: Contextualization of 3D model and assets for  oid:fileshare
  documentation: "# 3D model and assets Contextualization\nThe 3d model and assets\
    \ Contextualization runs as a process in CDF Functions. Process triggers on new\
    \ 3d model that not is connected to an asset. The process stages are as follows:\n\
    \n```\n  Read configuration and start process by\n  1. Read RAW table with manual\
    \ mappings and extract all rows not contextualized\n  2. Apply manual mappings\
    \ from 3D nodes to Asset - this will overwrite any existing mapping\n  3. Read\
    \ all time series not matched (or all if runAll is True)\n  4. Read all assets\n\
    \  5. Run ML contextualization to match 3D Nodes -> Assets\n  6. Update 3D Nodes\
    \ with mapping\n  7. Write results matched (good) not matched (bad) to RAW\n \
    \ 8. Output in good/bad table can then be used in workflow to update manual mappings\n\
    ```\nDefault configuration is provided as part of the deployment, but can be overwritten\
    \ by configuration provided in configuration section below:\n```\n # if True,\
    \ run without writing any annotations to CDF\n debug: False\n # if True run contextualization\
    \ on all 3d model, if False only run on 3d model that not is linked to an asset\n\
    \ runAll: False\n # RAW DB used to store input and results for contextualization\n\
    \ rawdb: '3d_oid_fileshare'\n # RAW table used to store all manual input for mapping\
    \ that should be used in contextualization\n # This table could be populated from\
    \ earlier mappings that are approved or used for manual override\n rawTableManual:\
    \ 'contextualization_manual_input'\n # RAW table used to store all mapping that\
    \ was automatically approved as good\n rawTableGood: 'contextualization_good'\n\
    \ # RAW table used to store all mapping that NOT was automatically approved\n\
    \ rawTableBad: 'contextualization_bad'\n # ExternalId for root assets to be used\
    \ for contextualization\n assetRootExtIds WMT:VAL\n # externalId for 3d data set\n\
    \ 3dDataSetExtId: 'ds_3d_oid'\n # Name of 3d model\n 3dModelName: Valhall\n #\
    \ Number between 0 and 1, indication of strict the matching should be 1 = only\
    \ exact matches\n matchThreshold: 0.75\n # if True keep old mapping, if False\
    \ overwrite old mapping\n keepOldMapping: False\n\n```\n"
  externalId: ep_ctx_3d_oid_fileshare_annotation
  name: ctx:3d:oid:fileshare:annotation
  rawTables:
  - dbName: 3d_oid_fileshare
    tableName: contextualization_good
  - dbName: 3d_oid_fileshare
    tableName: contextualization_bad
  - dbName: 3d_oid_fileshare
    tableName: contextualization_manual_input
  source: fileshare
- createdBy: unknown
  dataSetId: 42
  description: File source extraction pipeline with configuration for File extractor
    reading 3D data from oid:fileshare
  documentation: "The Cognite File Extractor is a generic file extractor that can\
    \ connect to and extract file from a host of different sources. \n\nThe currently\
    \ supported sources are: \n  * Local files \n  * File Transfer Protocol (FTP)\n\
    \  * Secure File Transfer Protocol (SFTP)\n  * File Transfer Protocol over SSH\
    \ (FTPS)\n  * Documents and files in SharePoint Online \n  * Files in Google Cloud\
    \ Storage \n\n\nThe extractor is provided with template configuration files for\
    \ all mentioned source systems. To set up the file extractor against your source\
    \ system, pick the config template that fits your setup and adjust parameters\
    \ as you see fit.\n"
  externalId: ep_src_3d_oid_fileshare
  name: src:3d:oid:fileshare
  source: fileshare
ExtractionPipelineConfig:
- config: "data:\n    3dDataSetExtId: ds_3d_oid\n    3dModelName: Valhall\n    assetRootExtId:\
    \ WMT:VAL\n    debug: false\n    keepOldMapping: false\n    matchThreshold: 0.75\n\
    \    rawTableBad: contextualization_bad\n    rawTableGood: contextualization_good\n\
    \    rawTableManual: contextualization_manual_input\n    rawdb: 3d_oid_fileshare\n\
    \    runAll: false\n"
  externalId: ep_ctx_3d_oid_fileshare_annotation
- config: "cognite:\n    data-set:\n        external-id: ds-3d:valhall\nfiles:\n \
    \   extensions:\n    - .zip\n    file-provider:\n        path: c:/tmp/files\n\
    \        type: local\nlogger:\n    console:\n        level: INFO\n    file:\n\
    \        level: INFO\n        path: c:/tmp/file.log\n"
  externalId: ep_src_3d_oid_fileshare
Function:
- description: Contextualization of 3d model and asset data for oid:fileshare
  envVars:
    CDF_ENV: dev
    ENV_TYPE: dev
  externalId: fn_context_3d_oid_fileshare_asset
  fileId: -1
  functionPath: ./handler.py
  metadata:
    cdf-toolkit-function-hash: 92f9657d1b6bc85b07302d3f2a694feccaf5b88fa0ad1116e9faf07f2499408a
    version: 0.0.1
  name: context:3d:oid:fileshare:asset
  owner: Anonymous
  runtime: py311
FunctionSchedule:
- cronExpression: 15 * * * *
  data:
    ExtractionPipelineExtId: ep_ctx_3d_oid_fileshare_annotation
  description: Run every 30 minute
  functionExternalId: fn_context_3d_oid_fileshare_asset
  name: daily-every-60-min
Group:
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            3d_oid_fileshare:
              tables: []
  - filesAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  - extractionConfigsAcl:
      actions:
      - READ
      scope:
        extractionPipelineScope:
          ids:
          - 1
  - extractionRunsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    origin: cdf-project-templates
  name: gp_3d_oid_extractor
  sourceId: <change_me>
- capabilities:
  - rawAcl:
      actions:
      - READ
      - WRITE
      scope:
        tableScope:
          dbsToTables:
            3d_oid_fileshare:
              tables: []
  - sessionsAcl:
      actions:
      - LIST
      - CREATE
      - DELETE
      scope:
        all: {}
  - assetsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  - filesAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  - threedAcl:
      actions:
      - READ
      - CREATE
      - UPDATE
      - DELETE
      scope:
        datasetScope:
          ids:
          - 42
  - extractionConfigsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  - extractionRunsAcl:
      actions:
      - READ
      - WRITE
      scope:
        datasetScope:
          ids:
          - 42
  - entitymatchingAcl:
      actions:
      - READ
      - WRITE
      scope:
        all: {}
  - functionsAcl:
      actions:
      - READ
      - WRITE
      scope:
        all: {}
  metadata:
    origin: cdf-project-templates
  name: gp_3d_oid_processing
  sourceId: <change_me>
- capabilities:
  - annotationsAcl:
      actions:
      - READ
      - REVIEW
      scope:
        all: {}
  - labelsAcl:
      actions:
      - READ
      scope:
        all: {}
  - threedAcl:
      actions:
      - READ
      scope:
        datasetScope:
          ids:
          - 42
  - filesAcl:
      actions:
      - READ
      scope:
        datasetScope:
          ids:
          - 42
  metadata:
    origin: cdf-project-templates
  name: gp_3d_oid_read
  sourceId: <change_me>
Row:
- args: []
  dataframe:
    empty_count: 1
    first_row:
      3dNodeName: /23-VG-9101/A1
      assetExternalId: WMT:23-VG-9101
      contextualized: ''
    index_name: key
    last_row:
      3dNodeName: /23-VG-9101/A1
      assetExternalId: WMT:23-VG-9101
      contextualized: ''
    nan_count: 0
    null_count: 0
    shape: 1x3
  kwargs:
    db_name: 3d_oid_fileshare
    ensure_parent: false
    table_name: contextualization_manual_input
  name: 3d_oid_fileshare_contextualization_manual_input_False
ThreeDModel:
- createdTime: 1
  dataSetId: 42
  name: Valhall
